import{j as e,r as o,u as g}from"./index-DeIxpO4k.js";import{P as j}from"./ProductItem-B1fIJFbF.js";import{g as p}from"./productsApi-s99y237h.js";import"./useCart-DjLz-eIC.js";function v({products:s}){return!s||s.length===0?e.jsx("div",{children:"No products available."}):e.jsx("div",{className:"columns is-multiline",children:s.map(t=>e.jsx("div",{className:"column is-3",children:e.jsx(j,{product:t})},t.id))})}function C({categories:s,selectedCategory:t,onSelectCategory:a}){return e.jsx("div",{className:"field",children:e.jsx("div",{className:"control",children:e.jsx("div",{className:"select",children:e.jsxs("select",{value:t,onChange:r=>a(r.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),s.map((r,c)=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},c))]})})})})}const N=(s,t)=>t?s.filter(a=>a.category.trim().toLowerCase()===t.trim().toLowerCase()):s,P=s=>Array.from(new Set(s.map(t=>t.category.trim().toLowerCase())));function A(){const[s,t]=o.useState([]),[a,r]=o.useState([]),[c,d]=o.useState(""),[n,u]=o.useState(!0),[m,h]=o.useState(null);o.useEffect(()=>{(async()=>{try{const i=await p();t(i);const x=P(i);r(x)}catch(i){h(`Failed to fetch products or categories: ${i.message}`)}finally{u(!1)}})()},[]);const f=n?[]:N(s,c),l=g(n,m);return l||e.jsx("section",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"columns",children:[e.jsx("div",{className:"column",children:e.jsx("h1",{className:"title",children:"Our Products"})}),e.jsx("div",{className:"column is-narrow",children:e.jsx(C,{categories:a,selectedCategory:c,onSelectCategory:d})})]}),e.jsx(v,{products:f})]})})}export{A as default};
